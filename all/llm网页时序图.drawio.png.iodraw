<mxfile host="Electron" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) iodraw/3.5.1 Chrome/124.0.6367.49 Electron/30.0.0 Safari/537.36" version="24.7.17">
  <diagram name="第 1 页" id="s0sip03sJUeeC9rz79mj">
    <mxGraphModel dx="933" dy="675" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="vbCNCnAVihHPZjUaovIV-1" value="用户" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="100" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-2" value="&quot;前端 Vue.js&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="374" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-3" value="中间件" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="651" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-4" value="路由器" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="885" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-5" value="&quot;网页聊天API&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="1130" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-6" value="&quot;聊天API (需认证)&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="1330" y="280" width="155" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-7" value="&quot;认证服务&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="1535" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-8" value="&quot;数据库操作&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="1735" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-9" value="&quot;SQLite数据库&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="1966" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-10" value="&quot;缓存服务&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="2166" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-11" value="&quot;LLM服务&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="2366" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-12" value="&quot;MiniMind模型&quot;" style="shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};size=65;" parent="1" vertex="1">
          <mxGeometry x="2607" y="280" width="150" height="3599" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-13" value="alt" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=30" parent="1" vertex="1">
          <mxGeometry x="1799" y="1389" width="453" height="197" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-14" value="[缓存未命中]" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" parent="vbCNCnAVihHPZjUaovIV-13" vertex="1">
          <mxGeometry x="30" width="423" height="20" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-15" value="alt" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=30" parent="1" vertex="1">
          <mxGeometry x="2230" y="1812" width="463" height="325" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-16" value="[缓存未命中]" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" parent="vbCNCnAVihHPZjUaovIV-15" vertex="1">
          <mxGeometry x="30" width="433" height="20" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-17" value="alt" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=30" parent="1" vertex="1">
          <mxGeometry x="1599" y="3023" width="653" height="213" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-18" value="[缓存未命中]" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" parent="vbCNCnAVihHPZjUaovIV-17" vertex="1">
          <mxGeometry x="30" width="623" height="20" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-19" value="alt" style="shape=umlFrame;dashed=1;pointerEvents=0;dropTarget=0;strokeColor=#B3B3B3;height=20;width=30" parent="1" vertex="1">
          <mxGeometry x="164" y="3582" width="573" height="202" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-20" value="[流式响应]" style="text;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;" parent="vbCNCnAVihHPZjUaovIV-19" vertex="1">
          <mxGeometry x="30" width="543" height="20" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-21" value="[普通响应]" style="shape=line;dashed=1;whiteSpace=wrap;verticalAlign=top;labelPosition=center;verticalLabelPosition=middle;align=center;strokeColor=#B3B3B3;" parent="vbCNCnAVihHPZjUaovIV-19" vertex="1">
          <mxGeometry y="106" width="573" height="4" as="geometry" />
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-22" value="1. 访问网页 (localhost:3000)" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-1" target="vbCNCnAVihHPZjUaovIV-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="321" y="383" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-23" value="2. 加载 Chat.vue 组件" style="curved=1;endArrow=block;rounded=0;" parent="1" source="vbCNCnAVihHPZjUaovIV-2" target="vbCNCnAVihHPZjUaovIV-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="439" />
              <mxPoint x="500" y="469" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-24" value="3. 初始化对话历史" style="curved=1;endArrow=block;rounded=0;" parent="1" source="vbCNCnAVihHPZjUaovIV-2" target="vbCNCnAVihHPZjUaovIV-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="525" />
              <mxPoint x="500" y="555" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-25" value="4. 输入消息并发送" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-1" target="vbCNCnAVihHPZjUaovIV-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="321" y="611" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-26" value="5. POST /api/v1/web-chat/" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-2" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="596" y="667" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-27" value="6. 记录请求日志" style="curved=1;endArrow=block;rounded=0;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="777" y="723" />
              <mxPoint x="777" y="753" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-28" value="7. 路由到 web_chat.py" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="852" y="809" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-29" value="8. 调用 web_chat() 函数" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-4" target="vbCNCnAVihHPZjUaovIV-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1091" y="865" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-30" value="9. 创建/获取对话" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-5" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1516" y="921" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-31" value="10. 查询/创建对话记录" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1934" y="977" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-32" value="11. 返回对话信息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-9" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1937" y="1025" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-33" value="12. 返回对话对象" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1519" y="1073" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-34" value="13. 存储用户消息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-5" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1516" y="1121" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-35" value="14. 插入用户消息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1934" y="1169" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-36" value="15. 确认存储成功" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-9" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1937" y="1217" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-37" value="16. 获取对话上下文" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-5" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1516" y="1265" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-38" value="17. 尝试从缓存获取" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2034" y="1321" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-39" value="18. 返回缓存结果" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-10" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2037" y="1369" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-40" value="19. 查询历史消息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1934" y="1462" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-41" value="20. 返回消息列表" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-9" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1937" y="1518" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-42" value="21. 更新缓存" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2034" y="1566" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-43" value="22. 返回上下文消息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1519" y="1632" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-44" value="23. 调用 get_llm_response()" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-5" target="vbCNCnAVihHPZjUaovIV-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1832" y="1680" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-45" value="24. 检查响应缓存" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-11" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2353" y="1736" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-46" value="25. 返回缓存结果" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-10" target="vbCNCnAVihHPZjUaovIV-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2350" y="1792" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-47" value="26. 加载 MiniMind 模型" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-11" target="vbCNCnAVihHPZjUaovIV-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2570" y="1893" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-48" value="27. 返回模型实例" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-12" target="vbCNCnAVihHPZjUaovIV-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2573" y="1949" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-49" value="28. 生成响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-11" target="vbCNCnAVihHPZjUaovIV-12" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2570" y="2005" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-50" value="29. 返回AI回复" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-12" target="vbCNCnAVihHPZjUaovIV-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2573" y="2061" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-51" value="30. 缓存响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-11" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2353" y="2117" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-52" value="31. 返回AI回复" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-11" target="vbCNCnAVihHPZjUaovIV-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1835" y="2175" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-53" value="32. 存储AI回复" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-5" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1516" y="2231" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-54" value="33. 插入AI消息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1934" y="2287" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-55" value="34. 清除相关缓存" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-8" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2034" y="2343" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-56" value="35. 确认存储成功" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-9" target="vbCNCnAVihHPZjUaovIV-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1937" y="2399" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-57" value="36. 返回聊天响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-5" target="vbCNCnAVihHPZjUaovIV-4" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1094" y="2455" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-58" value="37. 返回HTTP响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-4" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="855" y="2511" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-59" value="38. 记录响应日志" style="curved=1;endArrow=block;rounded=0;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="777" y="2567" />
              <mxPoint x="777" y="2597" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-60" value="39. 返回JSON响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="599" y="2653" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-61" value="40. 更新消息列表" style="curved=1;endArrow=block;rounded=0;" parent="1" source="vbCNCnAVihHPZjUaovIV-2" target="vbCNCnAVihHPZjUaovIV-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="500" y="2701" />
              <mxPoint x="500" y="2731" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-62" value="41. 显示AI回复" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-2" target="vbCNCnAVihHPZjUaovIV-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="324" y="2779" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-63" value="42. POST /api/v1/chat/ (带API Key)" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-1" target="vbCNCnAVihHPZjUaovIV-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="800" y="2835" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-64" value="43. 验证API Key" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-6" target="vbCNCnAVihHPZjUaovIV-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1517" y="2891" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-65" value="44. 检查API Key缓存" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-7" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1934" y="2947" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-66" value="45. 返回缓存结果" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-10" target="vbCNCnAVihHPZjUaovIV-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1937" y="3003" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-67" value="46. 查询API Key" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-7" target="vbCNCnAVihHPZjUaovIV-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1834" y="3104" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-68" value="47. 返回API Key信息" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-9" target="vbCNCnAVihHPZjUaovIV-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1837" y="3160" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-69" value="48. 缓存API Key" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-7" target="vbCNCnAVihHPZjUaovIV-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1934" y="3216" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-70" value="49. 返回认证结果" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-7" target="vbCNCnAVihHPZjUaovIV-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1520" y="3282" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-71" value="50. POST /v1/chat/completions" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-1" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="459" y="3338" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-72" value="51. 验证API Key" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1177" y="3394" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-73" value="52. 返回认证结果" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-7" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="3450" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-74" value="53. 处理OpenAI格式请求" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1592" y="3506" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-75" value="54. 返回OpenAI格式响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-11" target="vbCNCnAVihHPZjUaovIV-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1595" y="3562" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-76" value="55. 返回SSE流" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="462" y="3663" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="vbCNCnAVihHPZjUaovIV-77" value="56. 返回JSON响应" style="verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;" parent="1" source="vbCNCnAVihHPZjUaovIV-3" target="vbCNCnAVihHPZjUaovIV-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="462" y="3764" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
